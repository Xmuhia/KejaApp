"use strict";(self.webpackChunkubold_react=self.webpackChunkubold_react||[]).push([[7256],{75184:(e,t,n)=>{n.d(t,{Z:()=>i});n(72791);var s=n(89743),r=n(2677),a=n(2461),l=n(80184);const i=e=>(0,l.jsx)(s.Z,{children:(0,l.jsx)(r.Z,{children:(0,l.jsxs)("div",{className:"page-title-box",children:[(0,l.jsx)("div",{className:"page-title-right",children:(0,l.jsxs)(a.Z,{className:"m-0",children:[(0,l.jsx)(a.Z.Item,{href:"/",children:"Keja Plus"}),(e.breadCrumbItems||[]).map(((e,t)=>e.active?(0,l.jsx)(a.Z.Item,{active:!0,children:e.label},t):(0,l.jsx)(a.Z.Item,{href:e.path,children:e.label},t)))]})}),(0,l.jsx)("h4",{className:"page-title",children:e.title})]})})})},38459:(e,t,n)=>{n.d(t,{y:()=>m,J:()=>l});var s=n(72791),r=n(87705),a=n(80184);const l=e=>{let{defaultValues:t,resolver:n,children:l,onSubmit:i,formClass:d}=e;const c=(0,r.cI)({defaultValues:t,resolver:n}),{handleSubmit:o,register:p,control:m,formState:{errors:x}}=c;return(0,a.jsx)("form",{onSubmit:o(i),className:d,noValidate:!0,children:Array.isArray(l)?l.map((e=>e.props&&e.props.name?s.createElement(e.type,{...{...e.props,register:p,key:e.props.name,errors:x,control:m}}):e)):l})};var i=n(99410),d=n(21827),c=n(81694),o=n.n(c);const p=e=>{let{name:t,placeholder:n,refCallback:r,errors:l,control:c,register:p,className:m}=e;const[x,u]=(0,s.useState)(!1);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(i.Z,{className:"mb-0",children:[(0,a.jsx)(d.Z.Control,{type:x?"text":"password",placeholder:n,name:t,id:t,as:"input",ref:e=>{r&&r(e)},className:m,isInvalid:!(!l||!l[t]),...p?p(t):{},autoComplete:t}),(0,a.jsx)("div",{className:o()("input-group-text","input-group-password",{"show-password":x}),"data-password":x?"true":"false",children:(0,a.jsx)("span",{className:"password-eye",onClick:()=>{u(!x)}})})]})})},m=e=>{let{label:t,type:n,name:s,placeholder:r,register:l,errors:i,control:c,className:o,labelClassName:m,containerClass:x,refCallback:u,children:v,rows:h,...j}=e;const b="textarea"===n?"textarea":"select"===n?"select":"input";return(0,a.jsx)(a.Fragment,{children:"hidden"===n?(0,a.jsx)("input",{type:n,name:s,...l?l(s):{},...j}):(0,a.jsx)(a.Fragment,{children:"password"===n?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(d.Z.Group,{className:x,children:[t?(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsx)(d.Z.Label,{className:m,children:t})," ",v," "]}):null,(0,a.jsx)(p,{name:s,placeholder:r,refCallback:u,errors:i,register:l,className:o}),i&&i[s]?(0,a.jsx)(d.Z.Control.Feedback,{type:"invalid",className:"d-block",children:i[s].message}):null]})}):(0,a.jsx)(a.Fragment,{children:"checkbox"===n||"radio"===n?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(d.Z.Group,{className:x,children:[(0,a.jsx)(d.Z.Check,{type:n,label:t,name:s,id:s,ref:e=>{u&&u(e)},className:o,isInvalid:!(!i||!i[s]),...l?l(s):{},...j}),i&&i[s]?(0,a.jsx)(d.Z.Control.Feedback,{type:"invalid",children:i[s].message}):null]})}):(0,a.jsxs)(d.Z.Group,{className:x,children:[t?(0,a.jsx)(d.Z.Label,{className:m,children:t}):null,(0,a.jsx)(d.Z.Control,{type:n,placeholder:r,name:s,id:s,as:b,ref:e=>{u&&u(e)},className:o,isInvalid:!(!i||!i[s]),...l?l(s):{},rows:h,...j,autoComplete:s,children:v||null}),i&&i[s]?(0,a.jsx)(d.Z.Control.Feedback,{type:"invalid",children:i[s].message}):null]})})})})}},17256:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var s=n(72791),r=n(89743),a=n(2677),l=n(9140),i=n(43360),d=n(75184),c=n(90575),o=n(38217),p=n(74332),m=n(52720),x=n(49704),u=n(61480),v=n(80184);const h=e=>{let{userType:t,onDateSelect:n,onEventClick:s,onEventDrop:r,events:a}=e;return(0,v.jsx)("div",{id:"property-management-calendar",children:(0,v.jsx)(c.Z,{plugins:[o.Z,p.ZP,m.Z,x.Z,u.Z],initialView:"dayGridMonth",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,listWeek"},themeSystem:"bootstrap",editable:"tenant"!==t,selectable:!0,selectMirror:!0,dayMaxEvents:!0,weekends:!0,events:a,select:n,eventClick:s,eventDrop:r,eventContent:e=>{var t;const n=(e=>{switch(e){case"rent":return"#4CAF50";case"maintenance":return"#FFC107";case"inspection":return"#2196F3";default:return"#9E9E9E"}})((null===(t=e.event.extendedProps)||void 0===t?void 0:t.eventType)||"default");return(0,v.jsx)("div",{style:{backgroundColor:n,color:"#fff",padding:"2px 5px",borderRadius:"3px"},children:e.event.title})}})})};var j=n(87705),b=n(84158),y=n(81724),g=n(61265),Z=n(38459);const N=e=>{var t,n;let{isOpen:s,onClose:l,isEditable:d,eventData:c,userType:o,onRemoveEvent:p,onUpdateEvent:m,onAddEvent:x}=e;const u=(0,g.X)(y.Ry().shape({title:y.Z_().required("Please enter event title"),eventType:y.Z_().required("Please select event type"),start:y.hT().required("Please enter start date"),end:y.hT().required("Please enter end date"),description:y.Z_()})),h=(0,j.cI)({defaultValues:{title:c.title,eventType:(null===(t=c.extendedProps)||void 0===t?void 0:t.eventType)||"rent",start:c.start,end:c.end,description:null===(n=c.extendedProps)||void 0===n?void 0:n.description},resolver:u}),{handleSubmit:N,register:C,control:f,formState:{errors:w}}=h;return(0,v.jsxs)(b.Z,{show:s,onHide:l,children:[(0,v.jsx)(b.Z.Header,{closeButton:!0,children:(0,v.jsx)(b.Z.Title,{children:d?"Edit Event":"Add New Event"})}),(0,v.jsx)(b.Z.Body,{children:(0,v.jsxs)("form",{onSubmit:N((e=>{d?m(e):x(e)})),children:[(0,v.jsxs)(r.Z,{children:[(0,v.jsx)(a.Z,{sm:12,children:(0,v.jsx)(Z.y,{type:"text",label:"Event Title",name:"title",placeholder:"Enter event title",containerClass:"mb-3",register:C,errors:w,control:f},"title")}),(0,v.jsx)(a.Z,{sm:12,children:(0,v.jsxs)(Z.y,{type:"select",label:"Event Type",name:"eventType",containerClass:"mb-3",register:C,errors:w,control:f,children:[(0,v.jsx)("option",{value:"rent",children:"Rent Payment"}),(0,v.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,v.jsx)("option",{value:"inspection",children:"Inspection"}),"tenant"!==o&&(0,v.jsx)("option",{value:"leaseExpiry",children:"Lease Expiry"})]},"eventType")}),(0,v.jsx)(a.Z,{sm:6,children:(0,v.jsx)(Z.y,{type:"date",label:"Start Date",name:"start",containerClass:"mb-3",register:C,errors:w,control:f},"start")}),(0,v.jsx)(a.Z,{sm:6,children:(0,v.jsx)(Z.y,{type:"date",label:"End Date",name:"end",containerClass:"mb-3",register:C,errors:w,control:f},"end")}),(0,v.jsx)(a.Z,{sm:12,children:(0,v.jsx)(Z.y,{type:"textarea",label:"Description",name:"description",placeholder:"Enter event description",containerClass:"mb-3",register:C,errors:w,control:f},"description")})]}),(0,v.jsx)(r.Z,{children:(0,v.jsxs)(a.Z,{sm:12,className:"text-end",children:[d&&"tenant"!==o&&(0,v.jsx)(i.Z,{variant:"danger",className:"me-2",onClick:p,children:"Delete"}),(0,v.jsx)(i.Z,{variant:"light",className:"me-2",onClick:l,children:"Close"}),(0,v.jsx)(i.Z,{variant:"primary",type:"submit",children:"Save Changes"})]})})]})})]})},C=e=>{const t=new Date;return t.setDate(t.getDate()+e),t},f=[{id:"1",title:"Rent Due",start:new Date,end:new Date,className:"bg-danger",extendedProps:{eventType:"rent",description:"Monthly rent payment due"}},{id:"2",title:"Maintenance: Plumbing Check",start:C(3),end:C(3),className:"bg-warning",extendedProps:{eventType:"maintenance",description:"Routine plumbing inspection for all units"}},{id:"3",title:"Property Inspection",start:C(7),end:C(7),className:"bg-info",extendedProps:{eventType:"inspection",description:"Annual property inspection by management"}},{id:"4",title:"Lease Renewal - Unit 301",start:C(14),end:C(14),className:"bg-success",extendedProps:{eventType:"leaseRenewal",description:"Lease renewal for Unit 301"}},{id:"5",title:"Tenant Move-In - Unit 205",start:C(20),end:C(20),className:"bg-primary",extendedProps:{eventType:"moveIn",description:"New tenant moving into Unit 205"}}],w=()=>(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{id:"external-events",className:"m-t-20",children:[(0,v.jsx)("br",{}),(0,v.jsx)("p",{className:"text-muted",children:"Drag and drop your event or click in the calendar"}),[{id:1,className:"bg-success",title:"New Tenant"},{id:2,className:"bg-info",title:"Property Inspection"},{id:3,className:"bg-warning",title:"Maintenance Request"},{id:4,className:"bg-danger",title:"Rent Collection"}].map(((e,t)=>(0,v.jsxs)("div",{className:`external-event ${e.className}`,title:e.title,"data-class":e.className,children:[(0,v.jsx)("i",{className:"mdi mdi-checkbox-blank-circle me-2 vertical-middle"}),e.title]},t)))]})}),k=()=>{const[e,t]=(0,s.useState)([]),[n,c]=(0,s.useState)(!1),[o,p]=(0,s.useState)(null),[m,x]=(0,s.useState)(!1),[u,j]=(0,s.useState)("manager");(0,s.useEffect)((()=>{const e=(e=>{switch(e){case"tenant":return f.filter((e=>{var t;return["rent","maintenance","inspection"].includes(null===(t=e.extendedProps)||void 0===t?void 0:t.eventType)}));case"landlord":return f.filter((e=>{var t;return["rent","inspection","leaseRenewal"].includes(null===(t=e.extendedProps)||void 0===t?void 0:t.eventType)}));case"manager":return f;default:return[]}})(u);t(e)}),[u]);const b=()=>{c(!n),p(null),x(!1)};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(d.Z,{breadCrumbItems:[{label:"Apps",path:"/apps/calendar"},{label:"Calendar",path:"/apps/calendar",active:!0}],title:"Calendar"}),(0,v.jsx)(r.Z,{children:(0,v.jsx)(a.Z,{children:(0,v.jsx)(l.Z,{children:(0,v.jsx)(l.Z.Body,{children:(0,v.jsxs)(r.Z,{children:[(0,v.jsxs)(a.Z,{lg:3,children:[(0,v.jsxs)(i.Z,{className:"btn btn-lg font-16 btn-primary w-100 mb-3",id:"btn-new-event",onClick:b,children:[(0,v.jsx)("i",{className:"mdi mdi-plus-circle-outline"})," Create New Event"]}),(0,v.jsx)("div",{className:"mb-3",children:(0,v.jsxs)("select",{className:"form-select",value:u,onChange:e=>{return t=e.target.value,void j(t);var t},children:[(0,v.jsx)("option",{value:"tenant",children:"Tenant View"}),(0,v.jsx)("option",{value:"landlord",children:"Landlord View"}),(0,v.jsx)("option",{value:"manager",children:"Manager View"})]})}),(0,v.jsx)(w,{})]}),(0,v.jsx)(a.Z,{lg:9,children:(0,v.jsx)(h,{userType:u,onDateSelect:e=>{p({start:e.startStr,end:e.endStr,allDay:e.allDay}),x(!1),c(!0)},onEventClick:e=>{p(e.event.toPlainObject()),x(!0),c(!0)},onEventDrop:e=>{t((t=>t.map((t=>t.id===e.event.id?{...t,start:e.event.startStr,end:e.event.endStr}:t))))},events:e})})]})})})})}),n&&(0,v.jsx)(N,{isOpen:n,onClose:b,isEditable:m,eventData:o||{},userType:u,onRemoveEvent:()=>{o&&(t((e=>e.filter((e=>e.id!==o.id)))),c(!1))},onUpdateEvent:e=>{t((t=>t.map((t=>t.id===(null===o||void 0===o?void 0:o.id)?{...t,...e}:t)))),c(!1)},onAddEvent:e=>{t((t=>[...t,{...e,id:String(t.length+1)}])),c(!1)}})]})}}}]);
//# sourceMappingURL=7256.a174782d.chunk.js.map